<!DOCTYPE html>
<html>
<head>
    <title>Snake Game</title>
    <style>
        #gameCanvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="400" height="400"></canvas>
    <script>
        // Get the canvas element
        var canvas = document.getElementById('gameCanvas');
        var ctx = canvas.getContext('2d');

        // Set up some constants
        var BLOCK_SIZE = 20;
        var FPS = 10;

        // Set up some colors
        var WHITE = '         
        var BLACK = '#000000';
        var RED = '         
        var GREEN = '#00FF00';

        // Set up the snake and apple
        var snake = [{x: 2, y: 2}, {x: 3, y: 2}, {x: 4, y: 2}];
        var direction = 'RIGHT';
        var apple = {x: Math.floor(Math.random() * 20), y: Math.floor(Math.random() * 20)};
        var gameOver = false;

        // Draw the game
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            if (gameOver) {
                ctx.font = '36px Arial';
                ctx.fillStyle = WHITE;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('Game Over! Press R to restart', canvas.width / 2, canvas.height / 2);
            } else {
                for (var i = 0; i < snake.length; i++) {
                    ctx.fillStyle = GREEN;
                    ctx.fillRect(snake[i].x * BLOCK_SIZE, snake[i].y * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);
                }
                ctx.fillStyle = RED;
                ctx.fillRect(apple.x * BLOCK_SIZE, apple.y * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);
                ctx.font = '24px Arial';
                ctx.fillStyle = WHITE;
                ctx.textAlign = 'left';
                ctx.textBaseline = 'top';
                ctx.fillText('Score: ' + snake.length, 10, 10);
            }
        }

        // Update the game
        function update() {
            if (!gameOver) {
                var head = snake[snake.length - 1];
                var newHead = {x: head.x, y: head.y};
                if (direction === 'UP') newHead.y--;
                if (direction === 'DOWN') newHead.y++;
                if (direction === 'LEFT') newHead.x--;
                if (direction === 'RIGHT') newHead.x++;

                snake.push(newHead);

                if (snake[snake.length - 1].x === apple.x && snake[snake.length - 1].y === apple.y) {
                    apple = {x: Math.floor(Math.random() * 20), y: Math.floor(Math.random() * 20)};
                } else {
                    snake.shift();
                }

                if (snake[snake.length - 1].x < 0 || snake[snake.length - 1].x >= 20 ||
                    snake[snake.length - 1].y < 0 || snake[snake.length - 1].y >= 20 ||
                    isSnakeCollision(snake[snake.length - 1])) {
                    gameOver = true;
                }
            }
        }

        // Check for snake collision
        function isSnakeCollision(pos) {
            for (var i = 0; i < snake.length - 1; i++) {
                if (snake[i].x === pos.x && snake[i].y === pos.y) return true;
            }
            return false;
        }

        // Handle key press
        document.addEventListener('keydown', function(event) {
            if (event.key === 'ArrowUp' && direction !== 'DOWN') direction = 'UP';
            if (event.key === 'ArrowDown' && direction !== 'UP') direction = 'DOWN';
            if (event.key === 'ArrowLeft' && direction !== 'RIGHT') direction = 'LEFT';
            if (event.key === 'ArrowRight' && direction !== 'LEFT') direction = 'RIGHT';
            if (event.key === 'r' && gameOver) {
                snake = [{x: 2, y: 2}, {x: 3, y: 2}, {x: 4, y: 2}];
                direction = 'RIGHT';
                apple = {x: Math.floor(Math.random() * 20), y: Math.floor(Math.random() * 20)};
                gameOver = false;
            }
        });

        // Main game loop
        setInterval(function() {
            update();
            draw();
        }, 1000 / FPS);
    </script>
</body>
</html>
